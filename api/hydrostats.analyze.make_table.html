
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>make_table &#8212; hydrostats 0.73 documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="time_lag" href="hydrostats.analyze.time_lag.html" />
    <link rel="prev" title="Analysis (hydrostats.analyze)" href="../Analysis.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="hydrostats.analyze.time_lag.html" title="time_lag"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../Analysis.html" title="Analysis (hydrostats.analyze)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">hydrostats 0.73 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../Analysis.html" accesskey="U">Analysis (hydrostats.analyze)</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="../index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Preprocessing.html">Preprocessing (hydrostats.data)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Visualization.html">Visualization (hydrostats.visual)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Metrics.html">Metrics of Hydrological Skill (hydrostats.metrics)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ens_metrics.html">Metrics of Ensamble Forecast Skill (hydrostats.ens_metrics)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../Analysis.html">Analysis (hydrostats.analyze)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ref_table.html">Quick Reference Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plot_types.html">List of Plot File Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../timezones.html">List of Timezones</a></li>
<li class="toctree-l1"><a class="reference internal" href="../matplotlib_linestyles.html">Matplotlib Linestyles Help</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../Analysis.html"
                        title="previous chapter">Analysis (hydrostats.analyze)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="hydrostats.analyze.time_lag.html"
                        title="next chapter">time_lag</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/api/hydrostats.analyze.make_table.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="make-table">
<h1>make_table<a class="headerlink" href="#make-table" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="hydrostats.analyze.make_table">
<code class="descclassname">hydrostats.analyze.</code><code class="descname">make_table</code><span class="sig-paren">(</span><em>merged_dataframe</em>, <em>metrics</em>, <em>seasonal_periods=None</em>, <em>mase_m=1</em>, <em>dmod_j=1</em>, <em>nse_mod_j=1</em>, <em>h6_mhe_k=1</em>, <em>h6_ahe_k=1</em>, <em>h6_rmshe_k=1</em>, <em>d1_p_obs_bar_p=None</em>, <em>lm_x_obs_bar_p=None</em>, <em>kge2009_s=(1</em>, <em>1</em>, <em>1)</em>, <em>kge2012_s=(1</em>, <em>1</em>, <em>1)</em>, <em>replace_nan=None</em>, <em>replace_inf=None</em>, <em>remove_neg=False</em>, <em>remove_zero=False</em>, <em>location=None</em><span class="sig-paren">)</span><a class="headerlink" href="#hydrostats.analyze.make_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a table of user selected metrics with optional seasonal analysis.</p>
<p>Creates a table with metrics as specified by the user. Seasonal periods can also be
specified in order to compare different seasons and how well the simulated data matches the
observed data. Has options to save the table to either a csv or an excel workbook. Also has
an option to add a column for the location of the data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>merged_dataframe: DataFrame</strong></dt>
<dd><p class="first last">A pandas dataframe that has two columns of predicted data (Col 0) and observed data (Col 1)
with a datetime index.</p>
</dd>
<dt><strong>metrics: list of str</strong></dt>
<dd><p class="first last">A list of all the metrics that the user wants to calculate. The metrics abbreviations must
be used and can be found in the table of all the metrics in the documentation.</p>
</dd>
<dt><strong>seasonal_periods: 2D list of str, optional</strong></dt>
<dd><p class="first last">If given, specifies the seasonal periods that the user wants to analyze (e.g. [[‘06-01’,
‘06-30’], [‘08-12’, ‘11-23’]] would analyze the dates from June 1st to June 30th and also
August 8th to November 23). Note that the entire time series is analyzed with the selected
metrics by default.</p>
</dd>
<dt><strong>mase_m: int, Optional</strong></dt>
<dd><p class="first last">Parameter for the mean absolute scaled error (MASE) metric.</p>
</dd>
<dt><strong>dmod_j: int or float, optional</strong></dt>
<dd><p class="first last">Parameter for the modified index of agreement (dmod) metric.</p>
</dd>
<dt><strong>nse_mod_j: int or float, optional</strong></dt>
<dd><p class="first last">Parameter for the modified Nash-Sutcliffe (nse_mod) metric.</p>
</dd>
<dt><strong>h6_mhe_k: int or float, optional</strong></dt>
<dd><p class="first last">Parameter for the H6 (MHE) metric.</p>
</dd>
<dt><strong>h6_ahe_k: int or float, optional</strong></dt>
<dd><p class="first last">Parameter for the H6 (AHE) metric</p>
</dd>
<dt><strong>h6_rmshe_k: int or float, optional</strong></dt>
<dd><p class="first last">Parameter for the H6 (RMSHE) metric</p>
</dd>
<dt><strong>d1_p_obs_bar_p: float, optional</strong></dt>
<dd><p class="first last">Parameter fot the Legate McCabe Index of Agreement (d1_p).</p>
</dd>
<dt><strong>lm_x_obs_bar_p: float, optional</strong></dt>
<dd><p class="first last">Parameter for the Lagate McCabe Efficiency Index (lm_index).</p>
</dd>
<dt><strong>kge2009_s: tuple of floats</strong></dt>
<dd><p class="first last">A tuple of floats of length three signifying how to weight the three values used in the Kling Gupta (2009)
metric.</p>
</dd>
<dt><strong>kge2012_s: tuple of floats</strong></dt>
<dd><p class="first last">A tuple of floats of length three signifying how to weight the three values used in the Kling Gupta (2012)
metric.</p>
</dd>
<dt><strong>replace_nan: float, optional</strong></dt>
<dd><p class="first last">If given, indicates which value to replace NaN values with in the two arrays. If None, when
a NaN value is found at the i-th position in the observed OR simulated array, the i-th value
of the observed and simulated array are removed before the computation.</p>
</dd>
<dt><strong>replace_inf: float, optional</strong></dt>
<dd><p class="first last">If given, indicates which value to replace Inf values with in the two arrays. If None, when
an inf value is found at the i-th position in the observed OR simulated array, the i-th
value of the observed and simulated array are removed before the computation.</p>
</dd>
<dt><strong>remove_neg: boolean, optional</strong></dt>
<dd><p class="first last">If True, when a negative value is found at the i-th position in the observed OR simulated
array, the i-th value of the observed AND simulated array are removed before the
computation.</p>
</dd>
<dt><strong>remove_zero: boolean, optional</strong></dt>
<dd><p class="first last">If true, when a zero value is found at the i-th position in the observed OR simulated
array, the i-th value of the observed AND simulated array are removed before the
computation.</p>
</dd>
<dt><strong>location: str</strong></dt>
<dd><p class="first last">The name of the location that will be created as a column in the table that is created.
Useful for creating a large table with different datasets.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>DataFrame</strong></dt>
<dd><p class="first last">Dataframe with rows containing the metric values at the different time ranges, and columns
containing the metrics specified.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>If desired, users can export the tables to a CSV or Excel Workbook. This can be done using the built in methods
of pandas. A link to CSV method can be found at
<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_csv.html">https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_csv.html</a> and a link to the Excel
method can be found at
<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_excel.html">https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_excel.html</a></p>
<p class="rubric">Examples</p>
<p>First we need to get some data. The data here is pulled from the Streamflow Predication Tool
model and the ECMWF forecasting model. We are comparing the two models in this example.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">hydrostats.analyze</span> <span class="k">as</span> <span class="nn">ha</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">hydrostats.data</span> <span class="k">as</span> <span class="nn">hd</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Defining the URLs of the datasets</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sfpt_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;https://github.com/waderoberts123/Hydrostats/raw/master/Sample_data/sfpt_data/magdalena-calamar_interim_data.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glofas_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;https://github.com/waderoberts123/Hydrostats/raw/master/Sample_data/GLOFAS_Data/magdalena-calamar_ECMWF_data.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Merging the data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">merged_df</span> <span class="o">=</span> <span class="n">hd</span><span class="o">.</span><span class="n">merge_data</span><span class="p">(</span><span class="n">sfpt_url</span><span class="p">,</span> <span class="n">glofas_url</span><span class="p">,</span> <span class="n">column_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;SFPT&#39;</span><span class="p">,</span> <span class="s1">&#39;GLOFAS&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>Here we make a table and print the results</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_metrics</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;MAE&#39;</span><span class="p">,</span> <span class="s1">&#39;r2&#39;</span><span class="p">,</span> <span class="s1">&#39;NSE&#39;</span><span class="p">,</span> <span class="s1">&#39;KGE (2012)&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seasonal</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;03-31&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;04-01&#39;</span><span class="p">,</span> <span class="s1">&#39;06-30&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;07-01&#39;</span><span class="p">,</span> <span class="s1">&#39;09-30&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;10-01&#39;</span><span class="p">,</span> <span class="s1">&#39;12-31&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">ha</span><span class="o">.</span><span class="n">make_table</span><span class="p">(</span><span class="n">merged_df</span><span class="p">,</span> <span class="n">my_metrics</span><span class="p">,</span> <span class="n">seasonal</span><span class="p">,</span> <span class="n">remove_neg</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">remove_zero</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Magdalena&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span>
<span class="go">                         Location          MAE     ...           NSE  KGE (2012)</span>
<span class="go">Full Time Series        Magdalena  1157.669988     ...      0.873684    0.872871</span>
<span class="go">January-01:March-31     Magdalena   631.984177     ...      0.861163    0.858187</span>
<span class="go">April-01:June-30        Magdalena  1394.640050     ...      0.813737    0.876890</span>
<span class="go">July-01:September-30    Magdalena  1188.542871     ...      0.829492    0.831188</span>
<span class="go">October-01:December-31  Magdalena  1410.852917     ...      0.793927    0.791257</span>
</pre></div>
</div>
<p>[5 rows x 5 columns]</p>
<p>We can also write the table to a CSV or Excel worksheet.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ha</span><span class="o">.</span><span class="n">make_table</span><span class="p">(</span><span class="n">merged_df</span><span class="p">,</span> <span class="n">my_metrics</span><span class="p">,</span> <span class="n">seasonal</span><span class="p">,</span> <span class="n">remove_neg</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">remove_zero</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Magdalena&#39;</span><span class="p">,</span> <span class="n">to_csv</span><span class="o">=</span><span class="s1">&#39;magdalena_table.csv&#39;</span><span class="p">)</span>
<span class="go">                         Location          MAE     ...           NSE  KGE (2012)</span>
<span class="go">Full Time Series        Magdalena  1157.669988     ...      0.873684    0.872871</span>
<span class="go">January-01:March-31     Magdalena   631.984177     ...      0.861163    0.858187</span>
<span class="go">April-01:June-30        Magdalena  1394.640050     ...      0.813737    0.876890</span>
<span class="go">July-01:September-30    Magdalena  1188.542871     ...      0.829492    0.831188</span>
<span class="go">October-01:December-31  Magdalena  1410.852917     ...      0.793927    0.791257</span>
</pre></div>
</div>
<p>[5 rows x 5 columns]</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="hydrostats.analyze.time_lag.html" title="time_lag"
             >next</a> |</li>
        <li class="right" >
          <a href="../Analysis.html" title="Analysis (hydrostats.analyze)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">hydrostats 0.73 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../Analysis.html" >Analysis (hydrostats.analyze)</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Wade Roberts.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1.
    </div>
  </body>
</html>