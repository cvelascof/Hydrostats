
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>merge_data &#8212; hydrostats 0.74 documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="daily_average" href="hydrostats.data.daily_average.html" />
    <link rel="prev" title="julian_to_gregorian" href="hydrostats.data.julian_to_gregorian.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="hydrostats.data.daily_average.html" title="daily_average"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="hydrostats.data.julian_to_gregorian.html" title="julian_to_gregorian"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">hydrostats 0.74 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../Preprocessing.html" accesskey="U">Preprocessing (hydrostats.data)</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="../index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../Preprocessing.html">Preprocessing (hydrostats.data)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Visualization.html">Visualization (hydrostats.visual)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Metrics.html">Metrics of Hydrological Skill (hydrostats.metrics)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ens_metrics.html">Metrics of Ensemble Forecast Skill (hydrostats.ens_metrics)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Analysis.html">Analysis (hydrostats.analyze)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ref_table.html">Quick Reference Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plot_types.html">List of Plot File Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../timezones.html">List of Timezones</a></li>
<li class="toctree-l1"><a class="reference internal" href="../matplotlib_linestyles.html">Matplotlib Linestyles Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../change_log.html">Release Notes</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="hydrostats.data.julian_to_gregorian.html"
                        title="previous chapter">julian_to_gregorian</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="hydrostats.data.daily_average.html"
                        title="next chapter">daily_average</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/api/hydrostats.data.merge_data.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="merge-data">
<h1>merge_data<a class="headerlink" href="#merge-data" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="hydrostats.data.merge_data">
<code class="descclassname">hydrostats.data.</code><code class="descname">merge_data</code><span class="sig-paren">(</span><em>sim_fpath=None</em>, <em>obs_fpath=None</em>, <em>sim_df=None</em>, <em>obs_df=None</em>, <em>interpolate=None</em>, <em>column_names=('Simulated'</em>, <em>'Observed')</em>, <em>simulated_tz=None</em>, <em>observed_tz=None</em>, <em>interp_type='pchip'</em>, <em>return_tz='Etc/UTC'</em>, <em>julian=False</em>, <em>julian_freq=None</em><span class="sig-paren">)</span><a class="headerlink" href="#hydrostats.data.merge_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Merges two dataframes or csv files, depending on the input.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>sim_fpath: str</strong></dt>
<dd><p class="first last">The filepath to the simulated csv of data. Can be a url if the page is formatted correctly.
The csv must be formatted with the dates in the left column and the data in the right
column.</p>
</dd>
<dt><strong>obs_fpath: str</strong></dt>
<dd><p class="first last">The filepath to the observed csv. Can be a url if the page is formatted correctly.
The csv must be formatted with the dates in the left column and the data in the right
column.</p>
</dd>
<dt><strong>sim_df: DataFrame</strong></dt>
<dd><p class="first last">A pandas DataFrame containing the simulated data. Must be formatted with a datetime index
and the simulated data values in column 0.</p>
</dd>
<dt><strong>obs_df: DataFrame</strong></dt>
<dd><p class="first last">A pandas DataFrame containing the simulated data. Must be formatted with a datetime index
and the simulated data values in column 0.</p>
</dd>
<dt><strong>interpolate: str</strong></dt>
<dd><p class="first last">Must be either ‘observed’ or ‘simulated’. Specifies which data set you would like to
interpolate if interpolation is needed to properly merge the data.</p>
</dd>
<dt><strong>column_names: tuple of str</strong></dt>
<dd><p class="first last">Tuple of length two containing the column names that the user would like to set for the
DataFrame that is returned. Note that the simulated data will be in the left column and the
observed data will be in the right column</p>
</dd>
<dt><strong>simulated_tz: str</strong></dt>
<dd><p class="first last">The timezone of the simulated data. A full list of timezones can be found in the
<a class="reference internal" href="../timezones.html#timezones"><span class="std std-ref">List of Timezones</span></a>.</p>
</dd>
<dt><strong>observed_tz: str</strong></dt>
<dd><p class="first last">The timezone of the simulated data. A full list of timezones can be found in the
<a class="reference internal" href="../timezones.html#timezones"><span class="std std-ref">List of Timezones</span></a>.</p>
</dd>
<dt><strong>interp_type: str</strong></dt>
<dd><p class="first last">Which interpolation method to use. Uses the default pandas interpolater.
Available types are found at
<a class="reference external" href="http://pandas.pydata.org/pandas-docs/version/0.16.2/generated/pandas.DataFrame.interpolate.html">http://pandas.pydata.org/pandas-docs/version/0.16.2/generated/pandas.DataFrame.interpolate.html</a></p>
</dd>
<dt><strong>return_tz: str</strong></dt>
<dd><p class="first last">What timezone the merged dataframe’s index should be returned as. Default is ‘Etc/UTC’, which is recommended
for simplicity.</p>
</dd>
<dt><strong>julian: bool</strong></dt>
<dd><p class="first last">If True, will parse the first column of the file to a datetime index from julian floating point time
representation, this is only valid when supplying the sim_fpath and obs_fpath parameters. Users supplying two
DataFrame objects must convert the index from Julian to Gregorian using the julian_to_gregorian function in this
module</p>
</dd>
<dt><strong>julian_freq: str</strong></dt>
<dd><p class="first last">A string representing the frequency of the julian dates so that they can be rounded. See examples for usage.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The only acceptable time frequencies in the data are 15min, 30min, 45min, and any number of hours or
days in between.</p>
<p>There are three scenarios to consider when merging your data:</p>
<ol class="arabic simple">
<li>The first scenario is that the timezones and the spacing of the time series matches
(eg. 1 Day). In this case, you will want to leave the simulated_tz, observed_tz, and
interpolate arguments empty, and the function will simply join the two csv’s into a dataframe.</li>
<li>The second scenario is that you have two time series with matching time zones but not
matching spacing. In this case you will want to leave the simulated_tz and observed_tz empty,
and use the interpolate argument to tell the function which time series you would like to
interpolate to match the other time series.</li>
<li>The third scenario is that you have two time series with different time zones and possibly
different spacings. In this case you will want to fill in the simulated_tz, observed_tz, and
interpolate arguments. This will then take timezones into account when interpolating
the selected time series.</li>
</ol>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">hydrostats.data</span> <span class="k">as</span> <span class="nn">hd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">max_rows</span> <span class="o">=</span> <span class="mi">15</span>
</pre></div>
</div>
<p>The data URLs contain streamflow data from two different models, and are provided from the Hydrostats Github page</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sfpt_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;https://github.com/waderoberts123/Hydrostats/raw/master/Sample_data/sfpt_data/magdalena-calamar_interim_data.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glofas_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;https://github.com/waderoberts123/Hydrostats/raw/master/Sample_data/GLOFAS_Data/magdalena-calamar_ECMWF_data.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">merged_df</span> <span class="o">=</span> <span class="n">hd</span><span class="o">.</span><span class="n">merge_data</span><span class="p">(</span><span class="n">sfpt_url</span><span class="p">,</span> <span class="n">glofas_url</span><span class="p">,</span> <span class="n">column_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Streamflow Prediction Tool&#39;</span><span class="p">,</span> <span class="s1">&#39;GLOFAS&#39;</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="hydrostats.data.daily_average.html" title="daily_average"
             >next</a> |</li>
        <li class="right" >
          <a href="hydrostats.data.julian_to_gregorian.html" title="julian_to_gregorian"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">hydrostats 0.74 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../Preprocessing.html" >Preprocessing (hydrostats.data)</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Wade Roberts.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.
    </div>
  </body>
</html>